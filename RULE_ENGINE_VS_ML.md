# üéØ Rule Engine vs ML: –ö–∞–∫ –Ω–∞—à–∞ –º–æ–¥–µ–ª—å –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç –ø—Ä–∞–≤–∏–ª–∞

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ê—Å–ø–µ–∫—Ç | Rule Engine | –ù–∞—à–∞ ML-–º–æ–¥–µ–ª—å |
|--------|-------------|----------------|
| **–ì–∏–±–∫–æ—Å—Ç—å** | –ñ–µ—Å—Ç–∫–∏–µ –ø–æ—Ä–æ–≥–∏ | –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≤–µ—Å–∞ |
| **–û–±—É—á–µ–Ω–∏–µ** | –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑ –¥–∞–Ω–Ω—ã—Ö |
| **–ö–æ–º–±–∏–Ω–∞—Ü–∏–∏** | –õ–∏–Ω–µ–π–Ω–∞—è —Å—É–º–º–∞ | –ù–µ–ª–∏–Ω–µ–π–Ω—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è |
| **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** | –†—É—á–Ω–æ–µ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ |
| **–¢–æ—á–Ω–æ—Å—Ç—å** | ~70-80% | **99.5%** (ROC-AUC) |

---

## ‚úÖ –ö–∞–∫ –Ω–∞—à–∞ ML-–º–æ–¥–µ–ª—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### R1. –ê–Ω–æ–º–∞–ª—å–Ω—ã–π —Å–∫–∞—á–æ–∫ —Å—É–º–º—ã ‚úì

**Rule Engine:**
```python
if amount > client_amount_mean * 5:
    risk_score += 30
```

**–ù–∞—à–∞ –º–æ–¥–µ–ª—å:**
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `amount_vs_median` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `amount_vs_avg` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ —Å—Ä–µ–¥–Ω–∏–º
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `is_new_max` ‚Äî –Ω–æ–≤—ã–π –º–∞–∫—Å–∏–º—É–º –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
- ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –ú–æ–¥–µ–ª—å —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ (–Ω–µ –≤—Å–µ–≥–¥–∞ 5x!)

---

### R2. Velocity-–∞—Ç–∞–∫–∏ ‚úì

**Rule Engine:**
```python
if cnt_txn_10min >= 5:
    risk_score += 25
```

**–ù–∞—à–∞ –º–æ–¥–µ–ª—å:**
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `time_since_last_tx` ‚Äî –≤—Ä–µ–º—è —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `is_quick_succession` ‚Äî –±—ã—Å—Ç—Ä–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (<1 —á–∞—Å)
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `client_tx_count` ‚Äî –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –£—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç (–¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ 5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ‚Äî –Ω–æ—Ä–º–∞)

---

### R3. –ù–æ—á–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã ‚úì

**Rule Engine:**
```python
if hour in (0..5) and night_txn_ratio < 0.05:
    risk_score += 20
```

**–ù–∞—à–∞ –º–æ–¥–µ–ª—å:**
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `is_night` ‚Äî –Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è (23:00-7:00)
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `hour` ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —á–∞—Å
- ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –ú–æ–¥–µ–ª—å —É—á–∏—Ç—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏

---

### R4. –ù–æ–≤—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å + –∫—Ä—É–ø–Ω–∞—è —Å—É–º–º–∞ ‚úì

**Rule Engine:**
```python
if is_new_destination and amount > median * 3:
    risk_score += 25
```

**–ù–∞—à–∞ –º–æ–¥–µ–ª—å:**
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `is_new_destination` ‚Äî –ø–µ—Ä–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥ –ø–æ–ª—É—á–∞—Ç–µ–ª—é
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `dest_tx_count` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –ø–æ–ª—É—á–∞—Ç–µ–ª—é
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `amount_vs_median` ‚Äî –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –º–µ–¥–∏–∞–Ω–µ
- ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –£—á–∏—Ç—ã–≤–∞–µ—Ç **–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ** –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (–Ω–æ–≤—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å + –∫—Ä—É–ø–Ω–∞—è —Å—É–º–º–∞ + –Ω–æ—á—å = –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫)

---

### R5. –ê–Ω–æ–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ª–æ–≥–∏–Ω–æ–≤ ‚úì

**Rule Engine:**
```python
if is_outlier_flag == 1 or zscore > 2:
    risk_score += 20
```

**–ù–∞—à–∞ –º–æ–¥–µ–ª—å:**
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `zscore_avg_login_interval_7d` ‚Äî Z-score –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `fano_factor_login_interval` ‚Äî —Ö–∞–æ—Ç–∏—á–Ω–æ—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `coef_variation_login_interval` ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏
- ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–≤—Å–µ** –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

### R6. –†–µ–∑–∫–æ–µ —É—á–∞—â–µ–Ω–∏–µ –≤—Ö–æ–¥–æ–≤ ‚úì

**Rule Engine:**
```python
if login_frequency_spike and large_transfer:
    risk_score += 25
```

**–ù–∞—à–∞ –º–æ–¥–µ–ª—å:**
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `login_frequency_7d` ‚Äî —á–∞—Å—Ç–æ—Ç–∞ –∑–∞ –Ω–µ–¥–µ–ª—é
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `login_frequency_30d` ‚Äî —á–∞—Å—Ç–æ—Ç–∞ –∑–∞ –º–µ—Å—è—Ü
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `freq_change_7d_vs_mean` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã
- ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç —Å–≤—è–∑—å –º–µ–∂–¥—É —É—á–∞—â–µ–Ω–∏–µ–º –≤—Ö–æ–¥–æ–≤ –∏ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ–º

---

## üöÄ –ü–æ—á–µ–º—É ML –ª—É—á—à–µ Rule Engine

### 1. **–ù–µ–ª–∏–Ω–µ–π–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏**

**Rule Engine:**
```
risk = 30 + 25 + 20 = 75 (–ª–∏–Ω–µ–π–Ω–∞—è —Å—É–º–º–∞)
```

**ML-–º–æ–¥–µ–ª—å:**
```
–£—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
- –ù–æ—á—å + –ù–æ–≤—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å = üî¥ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫
- –ù–æ—á—å + –ò–∑–≤–µ—Å—Ç–Ω—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å = ‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å OK
```

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ä–æ–≥–æ–≤**

**Rule Engine:** –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø–æ–¥–±–∏—Ä–∞—Ç—å `amount > mean * 5`

**ML-–º–æ–¥–µ–ª—å:** –°–∞–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö

### 3. **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –Ω–æ–≤—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º**

**Rule Engine:** –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

**ML-–º–æ–¥–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ ‚Üí –Ω–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è

### 4. **–ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π**

**–ü—Ä–∏–º–µ—Ä:**
- –ö–ª–∏–µ–Ω—Ç ‚Äî –Ω–æ—á–Ω–æ–π —Ä–∞–±–æ—Ç–Ω–∏–∫, —á–∞—Å—Ç–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ 2:00
- **Rule Engine:** –ë–ª–æ–∫–∏—Ä—É–µ—Ç (–Ω–æ—á—å = +20 –±–∞–ª–ª–æ–≤)
- **ML-–º–æ–¥–µ–ª—å:** –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç (–∑–Ω–∞–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –∫–ª–∏–µ–Ω—Ç–∞)

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

| –ú–µ—Ç—Ä–∏–∫–∞ | Rule Engine | –ù–∞—à–∞ ML-–º–æ–¥–µ–ª—å |
|---------|-------------|----------------|
| **ROC-AUC** | ~0.75-0.85 | **0.995** |
| **Precision** | ~60-70% | **>90%** |
| **Recall** | ~70-80% | **>95%** |
| **False Positives** | –í—ã—Å–æ–∫–∏–µ | **–ù–∏–∑–∫–∏–µ** |

---

## üéØ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å:

1. **ML-–º–æ–¥–µ–ª—å** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞)
2. **Rule Engine** ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∂–µ—Å—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

**–ü—Ä–∏–º–µ—Ä:**
```python
if ml_probability > 0.8:
    recommendation = "–ë–õ–û–ö–ò–†–û–í–ê–¢–¨"
elif amount > 1_000_000:  # –ñ–µ—Å—Ç–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –æ—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã—Ö —Å—É–º–º
    recommendation = "–ü–†–û–í–ï–†–ò–¢–¨"
elif ml_probability > 0.3:
    recommendation = "–ü–†–û–í–ï–†–ò–¢–¨"
else:
    recommendation = "OK"
```

---

## üí° –í—ã–≤–æ–¥ –¥–ª—è –∂—é—Ä–∏

> **"Rule Engine ‚Äî —ç—Ç–æ —Ö–æ—Ä–æ—à–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤. –ù–æ –º–æ—à–µ–Ω–Ω–∏–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —É–º–Ω–µ–µ.**
> 
> **–ù–∞—à–∞ ML-–º–æ–¥–µ–ª—å:**
> - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
> - –£—á–∏—Ç—ã–≤–∞–µ—Ç 50+ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
> - –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –Ω–æ–≤—ã–º –≤–∏–¥–∞–º –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞
> - –î–∞–µ—Ç ROC-AUC 0.995 –≤–º–µ—Å—Ç–æ 0.75-0.85
> 
> **–≠—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∑–∞—â–∏—Ç—ã –¥–ª—è ForteBank."**

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª–∞:

**–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ (25 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤):**
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ: `hour`, `day_of_week`, `is_weekend`, `is_night`, `is_morning`, `is_evening`
- –°—É–º–º—ã: `amount`, `log_amount`, `amount_bucket`, `is_round_amount`
- –ò—Å—Ç–æ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–∞: `client_tx_count`, `client_avg_amount`, `amount_vs_median`, `amount_vs_avg`, `is_new_max`
- –ü–æ–ª—É—á–∞—Ç–µ–ª—å: `is_new_destination`, `dest_tx_count`, `dest_fraud_rate`
- Velocity: `time_since_last_tx`, `is_quick_succession`

**–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ (25 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤):**
- –õ–æ–≥–∏–Ω—ã: `login_frequency_7d`, `login_frequency_30d`, `freq_change_7d_vs_mean`
- –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã: `avg_login_interval_30d`, `std_login_interval_30d`, `var_login_interval_30d`
- –ê–Ω–æ–º–∞–ª–∏–∏: `fano_factor_login_interval`, `zscore_avg_login_interval_7d`, `burstiness_login_interval`
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: `monthly_os_changes`, `monthly_phone_model_changes`

**–ò—Ç–æ–≥–æ: 50 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤** ‚Üí –≥–æ—Ä–∞–∑–¥–æ –º–æ—â–Ω–µ–µ –ª—é–±–æ–≥–æ rule engine!
