# üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–£—Ç–∏–ª–∏—Ç–∞ `prepare_data.py` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–≤–∞ –∏—Å—Ö–æ–¥–Ω—ã—Ö CSV —Ñ–∞–π–ª–∞ –∏–∑ –ø–∞–ø–∫–∏ `data/`
2. –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏
3. –ü—Ä–∏–º–µ–Ω—è–µ—Ç feature engineering (—Å–æ–∑–¥–∞–µ—Ç 50 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤)
4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≥–æ—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
python3 prepare_data.py
```

–°–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `processed_data.csv` —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.

### –° —Å–æ–∑–¥–∞–Ω–∏–µ–º –¥–µ–º–æ-–≤—ã–±–æ—Ä–∫–∏

```bash
python3 prepare_data.py --demo
```

–°–æ–∑–¥–∞—Å—Ç:
- `processed_data.csv` ‚Äî –ø–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç (13,140 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
- `demo_batch_ready.csv` ‚Äî –¥–µ–º–æ-–≤—ã–±–æ—Ä–∫–∞ (10 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π: 5 –ª–µ–≥–∏—Ç–∏–º–Ω—ã—Ö + 5 –º–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏—Ö)

### –° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–ø—É—Å–∫–æ–º Streamlit ‚≠ê

```bash
python3 prepare_data.py --demo --streamlit
```

**–í—Å–µ –≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ:**
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
2. –°–æ–∑–¥–∞–µ—Ç –¥–µ–º–æ-–≤—ã–±–æ—Ä–∫—É
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç Streamlit

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

```bash
python3 prepare_data.py \
  --transactions "data/—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –ú–æ–±–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –ë–∞–Ω–∫–∏–Ω–≥–µ.csv" \
  --behavioral "data/–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–ª–∏–µ–Ω—Ç–æ–≤.csv" \
  --output "my_dataset.csv" \
  --demo \
  --demo-clean 10 \
  --demo-fraud 10 \
  --streamlit
```

**–û–ø—Ü–∏–∏:**
- `--transactions` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- `--behavioral` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏
- `--output` ‚Äî –∏–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- `--demo` ‚Äî —Å–æ–∑–¥–∞—Ç—å –¥–µ–º–æ-–≤—ã–±–æ—Ä–∫—É
- `--demo-clean` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–µ–≥–∏—Ç–∏–º–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –¥–µ–º–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
- `--demo-fraud` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –¥–µ–º–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
- `--streamlit` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å Streamlit –ø–æ—Å–ª–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö ‚≠ê

## üìä –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —É—Ç–∏–ª–∏—Ç–∞

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ß–∏—Ç–∞–µ—Ç CSV —Ñ–∞–π–ª—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ –ø–æ `client_id`
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –®–∞–≥ 2: Feature Engineering
–°–æ–∑–¥–∞–µ—Ç 50 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ (7):**
- `hour`, `day_of_week`, `day_of_month`
- `is_weekend`, `is_night`, `is_morning`, `is_evening`

**–°—É–º–º—ã (6):**
- `log_amount`, `amount_bucket`
- `is_round_amount`, `is_round_100`

**–ò—Å—Ç–æ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–∞ (8):**
- `client_tx_count`, `client_avg_amount`, `client_median_amount`
- `amount_vs_median`, `amount_vs_avg`
- `client_max_amount`, `is_new_max`

**–ü–æ–ª—É—á–∞—Ç–µ–ª—å (5):**
- `is_new_destination`, `dest_tx_count`
- `dest_fraud_rate`, `dest_total_tx`, `dest_unique_clients`

**Velocity (2):**
- `time_since_last_tx`, `is_quick_succession`

**–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ (22):**
- –ò–∑ —Ñ–∞–π–ª–∞ "–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–ª–∏–µ–Ω—Ç–æ–≤.csv"

### –®–∞–≥ 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–µ
- –§–æ—Ä–º–∞—Ç –≥–æ—Ç–æ–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Streamlit

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/usr/src/forte/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –ú–æ–±–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –ë–∞–Ω–∫–∏–Ω–≥–µ.csv  ‚Üê –ò—Å—Ö–æ–¥–Ω–∏–∫ 1
‚îÇ   ‚îî‚îÄ‚îÄ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–ª–∏–µ–Ω—Ç–æ–≤.csv           ‚Üê –ò—Å—Ö–æ–¥–Ω–∏–∫ 2
‚îú‚îÄ‚îÄ prepare_data.py                                    ‚Üê –£—Ç–∏–ª–∏—Ç–∞
‚îú‚îÄ‚îÄ full_dataset.csv                                   ‚Üê –ü–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç (—Å–æ–∑–¥–∞–µ—Ç—Å—è)
‚îî‚îÄ‚îÄ demo_batch_ready.csv                               ‚Üê –î–µ–º–æ-–≤—ã–±–æ—Ä–∫–∞ (—Å–æ–∑–¥–∞–µ—Ç—Å—è)
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞

–£—Ç–∏–ª–∏—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫:
- `client_id`
- `amount`
- `transaction_datetime`
- `hour`, `day_of_week`, `is_weekend`
- `is_new_destination`
- `client_avg_amount`

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Streamlit

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Streamlit:
   ```bash
   streamlit run app.py
   ```

2. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º "–ü–∞–∫–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞"

3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ `demo_batch_ready.csv` –∏–ª–∏ `full_dataset.csv`

4. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"

## üí° –ü—Ä–∏–º–µ—Ä—ã

### –°–æ–∑–¥–∞—Ç—å –¥–µ–º–æ —Å 20 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
```bash
python3 prepare_data.py --demo --demo-clean 10 --demo-fraud 10
```

### –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–µ–∑ –¥–µ–º–æ
```bash
python3 prepare_data.py --output transactions_processed.csv
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
```bash
python3 prepare_data.py \
  --transactions "my_transactions.csv" \
  --behavioral "my_behavioral.csv" \
  --output "my_output.csv"
```

## üîç –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
======================================================================
–ü–û–î–ì–û–¢–û–í–ö–ê –î–ê–ù–ù–´–• –î–õ–Ø –ü–†–û–í–ï–†–ö–ò –ú–û–®–ï–ù–ù–ò–ß–ï–°–¢–í–ê
======================================================================

üìä –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
  - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: data/—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –ú–æ–±–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –ë–∞–Ω–∫–∏–Ω–≥–µ.csv
  - –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã: data/–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–ª–∏–µ–Ω—Ç–æ–≤.csv
‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–æ 13140 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
  - –õ–µ–≥–∏—Ç–∏–º–Ω—ã—Ö: 12975
  - –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏—Ö: 165

üîß –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ feature engineering...
‚úì –°–æ–∑–¥–∞–Ω–æ 50 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

üíæ –®–∞–≥ 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...
‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤: full_dataset.csv

======================================================================
‚úÖ –î–ê–ù–ù–´–ï –ì–û–¢–û–í–´ –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
======================================================================

üìã –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ-–≤—ã–±–æ—Ä–∫–∏...
‚úì –°–æ–∑–¥–∞–Ω–∞ –¥–µ–º–æ-–≤—ã–±–æ—Ä–∫–∞:
  - –õ–µ–≥–∏—Ç–∏–º–Ω—ã—Ö: 5
  - –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏—Ö: 5
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤: demo_batch_ready.csv

‚úÖ –ì–æ—Ç–æ–≤–æ!

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
  1. –ü–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç: full_dataset.csv
  2. –î–µ–º–æ-–≤—ã–±–æ—Ä–∫–∞: demo_batch_ready.csv
```

## üéì –î–ª—è –∂—é—Ä–∏

> **"–ú—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–∞–Ω–Ω—ã—Ö. –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ CSV, –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∏—Ö, –ø—Ä–∏–º–µ–Ω—è–µ—Ç feature engineering –∏ —Å–æ–∑–¥–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç —Å 50 –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏. –≠—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç production-ready –ø–æ–¥—Ö–æ–¥ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö."**

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**
